app.get("/", async (req, res)=>{

    try {
        const sqlQuery = 'SELECT titulo, texto FROM posts';
        const result = await db.query(sqlQuery);

        const results = result.rows || result; // compat√≠vel com pg ou mysql
        console.log("‚úÖ Resultados do banco:", results);

        let tableRows = "";
        results.forEach(row => {
            tableRows += `
                <tr>
                    <td>${row.titulo}</td>
                    <td>${row.texto}</td>
                </tr>
            `;
        });

        const htmlFilePath = path.join(__dirname, "..", "views", "index.html");
        console.log("üìÑ Lendo arquivo:", htmlFilePath);

        const htmlTemplate = await fs.readFile(htmlFilePath, 'utf8');

     

        // usar regex pra garantir substitui√ß√£o mesmo com espa√ßos
        const renderizarHtml = htmlTemplate.replace(/\*\*##sql_data_rows##\*\*/g, tableRows);

        res.setHeader('Content-Type', 'text/html');
        res.send(renderizarHtml);

        //res.sendFile(path.join(__dirname, "views/index.html"))

    }catch (error) {
       console.error('‚ùå Erro ao renderizar:', error);
        res.status(500).send('Erro interno do servidor.');
    }

        
})